<template name="spell_list_page">
  <div class="spell_content">
    <div class="form_area spell_nav">
      <div class="table_title">Список заклинаний:</div>
      <ul>
        {{#each get_nav_spell_list}}
          <li class="nav_spell {{selected_nav_spell}}">{{school}} : {{type}} : {{name}}</li>
        {{/each}}
      </ul>
    </div>
    {{#if get_non_ritual_spell_list true}}
      <div class='spell_list form_area'>
        <div class="table_title">Заклинания</div>
        <table cellpadding="0" cellspacing="0"> 
            <tr class="title">
              <td class="name">Название</td>
              <td class="sub_name">Подназвание</td>
              <td class="lvl">Уровень</td>
              <td class="type">Тип</td>
              <td class="school">Школа</td>
              <td class="dices">Бросок</td>
              <td class="effect">Доп эффект</td>
              <td class="points">Очки: У/П/Д/Р/К/Д/В</td>
              <td class="users">Доступно</td>
              <td class="descr">Описание</td>
            </tr>
          {{#each get_non_ritual_spell_list}}
            <tr class='spell {{selected_spell}}'>
              <td class="name">{{name}}</td>
              <td class="sub_name">{{sub_name}}</td>
              <td class="lvl">{{lvl}}</td>
              <td class="type">{{type}}</td>
              <td class="school">{{school}}</td>
              <td class="dices">{{dices}}</td>
              <td class="effect">{{effect}}</td>
              <td class="points">{{points}}: {{power_mod}}/{{hit_mod}}/{{range_mod}}/{{size_mod}}/{{count_mod}}/{{duration_mod}}/{{explosion_mod}} </td>
              <td class="users">{{users}}</td>
              <td class="descr">{{descr}}</td>
            </tr>
          {{/each}}
        </table>
      </div>
    {{/if}}
    {{#if get_ritual_spell_list true}}
      <div class='spell_list form_area'>
        <div class="table_title">Ритуалы</div>
        <table cellpadding="0" cellspacing="0"> 
            <tr class="title">
              <td class="name">Название</td>
              <td class="sub_name">Подназвание</td>
              <td class="lvl">Уровень</td>
              <td class="lvl">Ритуал</td>
              <td class="type">Тип</td>
              <td class="school">Школа</td>
              <td class="dices">Бросок</td>
              <td class="effect">Доп эффект</td>
              <td class="points">Очки: У/П/Д/Р/К/Д/В</td>
              <td class="users">Доступно</td>
              <td class="descr">Описание</td>
            </tr>
          {{#each get_ritual_spell_list}}
            <tr class='spell {{selected_spell}}'>
              <td class="name">{{name}}</td>
              <td class="sub_name">{{sub_name}}</td>
              <td class="lvl">{{lvl}}</td>
              <td class="ritual">{{ritual}}</td>
              <td class="type">{{type}}</td>
              <td class="school">{{school}}</td>
              <td class="dices">{{dices}}</td>
              <td class="effect">{{effect}}</td>
              <td class="points">{{points}}: {{power_mod}}/{{hit_mod}}/{{range_mod}}/{{size_mod}}/{{count_mod}}/{{duration_mod}}/{{explosion_mod}} </td>
              <td class="users">{{users}}</td>
              <td class="descr">{{descr}}</td>
            </tr>
          {{/each}}
        </table>
      </div>
    {{/if}}
    {{#if get_non_spell_list true}}
      <div class='spell_list form_area'>
        <div class="table_title">Неизвестное</div>
        <table cellpadding="0" cellspacing="0"> 
            <tr class="title">
              <td class="name">Название</td>
              <td class="sub_name">Подназвание</td>
              <td class="lvl">Уровень</td>
              <td class="type">Тип</td>
              <td class="school">Школа</td>
              <td class="dices">Бросок</td>
              <td class="effect">Доп эффект</td>
              <td class="points">Очки: У/П/Д/Р/К/Д/В </td>
              <td class="descr">Описание</td>
            </tr>
          {{#each get_non_spell_list}}
            <tr class='spell {{selected_spell}}'>
              <td class="name">{{name}}</td>
              <td class="sub_name">{{sub_name}}</td>
              <td class="lvl">{{lvl}}</td>
              <td class="type">{{type}}</td>
              <td class="school">{{school}}</td>
              <td class="dices">{{dices}}</td>
              <td class="effect">{{effect}}</td>
              <td class="points">{{points}}: {{power_mod}}/{{hit_mod}}/{{range_mod}}/{{size_mod}}/{{count_mod}}/{{duration_mod}}/{{explosion_mod}} </td>
              <td class="descr">{{descr}}</td>
            </tr>
          {{/each}}
        </table>
      </div>
    {{/if}} 
  </div>
  <div></div>
  <div class='spell_edit form_area'>
  	<div class='name'>Заклинание <b>{{get_selected_spell.name}}</b></div>
   	<form name='spell_edit'>
    
      <div class='main'>
        <div><span>Название:</span><input type='text' name='name' value='{{get_selected_spell.name}}'></div>
        <div><span>Подназвание:</span><input type='text' name='sub_name' value='{{get_selected_spell.sub_name}}'></div>
        <div><span>Кому доступно:</span><input type='text' name='users' value='{{get_selected_spell.users}}'></div>
        <div><span>Уровень заклинания:</span><input type='text' name='lvl' value='{{get_selected_spell.lvl}}'></div>
        <div><span>Тип:</span><input type='text' name='type' value='{{get_selected_spell.type}}'></div>
        <div><span>Ритуал:</span><input type='text' name='ritual' value='{{get_selected_spell.ritual}}'></div>
        <div><span>Школа:</span><input type='text' name='school' value='{{get_selected_spell.school}}'></div>
        <div><span>Бросок:</span><input type='text' name='dices' value='{{get_selected_spell.dices}}'></div>
        <div><span>Доп эффект:</span><input type='text' name='effect' value='{{get_selected_spell.effect}}'></div>
        <div><span>Количество очков:</span><input type='text' name='points' value='{{get_selected_spell.points}}'></div>
        <div><span>Модификатор силы:</span><input type='text' name='power_mod' value='{{get_selected_spell.power_mod}}'></div>
        <div><span>Модификатор попадания:</span><input type='text' name='hit_mod' value='{{get_selected_spell.hit_mod}}'></div>
        <div><span>Модификатор дальности:</span><input type='text' name='range_mod' value='{{get_selected_spell.range_mod}}'></div>
        <div><span>Модификатор размера:</span><input type='text' name='size_mod' value='{{get_selected_spell.size_mod}}'></div>
        <div><span>Модификатор количества:</span><input type='text' name='count_mod' value='{{get_selected_spell.count_mod}}'></div>
        <div><span>Модификатор длительности:</span><input type='text' name='duration_mod' value='{{get_selected_spell.duration_mod}}'></div>
        <div><span>Модификатор взрыва:</span><input type='text' name='explosion_mod' value='{{get_selected_spell.explosion_mod}}'></div>
        <div><span>Описание:</span><textarea type='text' name='descr' value='{{get_selected_spell.descr}}' resize="none"></textarea></div>
      </div>

      {{#if currentUser}}
        <div class='buttons'>
          <div class='spell_upsert btn'>Сохранить</div>
          {{#if get_selected_spell}}
            <div class='spell_delete btn'>Удалить</div>
            <div class='spell_clear btn'>Очистить</div>
          {{/if}}
        </div>
      {{/if}}
  	</form>
  </div>
</template> 